{"version":3,"sources":["pages/questionnaire/questionnaire.js"],"names":["Page","data","flagAdd","zeroQuestion","idx","curGroupId","flag","date","groupInfo","groupName","groupDesc","sceneInfo","content","onLoad","onReady","onShow","onHide","onUnload","onPullDownRefresh","bindDateChange","e","setData","detail","value","handleQueAdd","push","length","bindQueDelete","currentTarget","dataset","splice","addQuestion","setQueCurrent","parseInt","bindQueClose","bindSceneQueClose","chooseQue","otherIndex","groupId","typeId","myChoice","important","item","itemIndex","itemContent","range","sceneId","title","queDelete","addOption","String","fromCharCode","supportOther","cancelOther"],"mappings":"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","file":"questionnaire.js","sourcesContent":["// 获取全局应用程序实例对象\n// const app = getApp()\n\n// 创建页面实例对象\nPage({\n  /**\n   * 页面的初始数据\n   * zeroQuestion没有分组，即0个分组\n   * flag0添加题目 1有自定义问题 2弹出选择问题遮罩层\n   */\n  data: {\n    flagAdd: 0,\n    zeroQuestion: true,\n    idx: -1,\n    curGroupId: 0,\n    flag: 0,\n    date: '2017/01/01',\n    groupInfo: [\n      {\n        groupName: '首页',\n        groupDesc: ''\n      }\n    ],\n    sceneInfo: [],\n    content: []\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad () {\n    // TODO: onLoad\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady () {\n    // TODO: onReady\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow () {\n    // TODO: onShow\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide () {\n    // TODO: onHide\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload () {\n    // TODO: onUnload\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh () {\n    // TODO: onPullDownRefresh\n  },\n\n  /**\n   * 绑定日期函数\n   */\n  bindDateChange (e) {\n    this.setData({\n      date: e.detail.value\n    })\n  },\n\n  /**\n   * 问卷选项卡添加\n   */\n  handleQueAdd (e) {\n    let groupInfo = this.data.groupInfo\n    groupInfo.push({\n      groupName: '第' + (this.data.idx + 1) + '组'\n    })\n    this.setData({\n      groupInfo: groupInfo,\n      idx: this.data.idx + 1,\n      curGroupId: this.data.groupInfo.length - 1\n    })\n  },\n\n  /**\n   * 问卷选项卡删除\n   */\n  bindQueDelete (e) {\n    let idx = e.currentTarget.dataset.idx\n    let groupInfo = this.data.groupInfo\n    groupInfo.splice(idx, 1)\n    this.setData({\n      groupInfo: groupInfo,\n      curGroupId: idx - 1\n    })\n    if (groupInfo.length === 0) {\n      this.setData({\n        idx: -1\n      })\n    }\n  },\n\n  /**\n   * 添加组问题\n   */\n  addQuestion (e) {\n    this.setData({\n      flag: 1\n    })\n  },\n\n  /**\n   * 选项卡点击\n   * flagAll标志组下没题目则为true\n   */\n  setQueCurrent (e) {\n    let idx = parseInt(e.currentTarget.dataset.idx)\n    this.setData({\n      curGroupId: idx\n    })\n  },\n\n  /**\n   * 遮罩层关闭1\n   */\n  bindQueClose (e) {\n    this.setData({\n      flag: 0\n    })\n  },\n\n  /**\n   * 遮罩层关闭2\n   */\n  bindSceneQueClose (e) {\n    this.setData({\n      flag: 0\n    })\n  },\n\n  /**\n   * 组题目添加\n   */\n  chooseQue (e) {\n    var idx = parseInt(e.currentTarget.dataset.idx)\n    switch (idx) {\n      case 0:\n        this.data.content.push({\n          otherIndex: null,\n          groupId: this.data.curGroupId,\n          typeId: 0,\n          myChoice: false,\n          important: true,\n          item: [\n            {\n              itemIndex: 'A',\n              itemContent: ''\n            },\n            {\n              itemIndex: 'B',\n              itemContent: ''\n            }\n          ],\n          range: [1, 10],\n          sceneId: -1,\n          title: '12323'\n        })\n        this.setData({\n          content: this.data.content,\n          flag: 0\n        })\n        break\n      case 1:\n        this.data.content.push({\n          otherIndex: null,\n          groupId: this.data.curGroupId,\n          typeId: 1,\n          myChoice: false,\n          important: true,\n          item: [\n            {\n              itemIndex: 'A',\n              itemContent: ''\n            },\n            {\n              itemIndex: 'B',\n              itemContent: ''\n            }\n          ],\n          range: [1, 10],\n          sceneId: -1,\n          title: '12323'\n        })\n        this.setData({\n          content: this.data.content,\n          flag: 0\n        })\n        break\n      case 2:\n        this.data.content.push({\n          otherIndex: null,\n          groupId: this.data.curGroupId,\n          typeId: 2,\n          myChoice: false,\n          important: true,\n          item: [\n            {\n              itemIndex: 'A',\n              itemContent: ''\n            },\n            {\n              itemIndex: 'B',\n              itemContent: ''\n            }\n          ],\n          range: [1, 10],\n          sceneId: -1,\n          title: '12323'\n        })\n        this.setData({\n          content: this.data.content,\n          flag: 0\n        })\n        break\n      case 3:\n        this.data.content.push({\n          otherIndex: null,\n          groupId: this.data.curGroupId,\n          typeId: 3,\n          myChoice: false,\n          important: true,\n          item: [\n            {\n              itemIndex: 'A',\n              itemContent: ''\n            },\n            {\n              itemIndex: 'B',\n              itemContent: ''\n            }\n          ],\n          range: [1, 10],\n          sceneId: -1,\n          title: '12323'\n        })\n        this.setData({\n          content: this.data.content,\n          flag: 0\n        })\n        break\n    }\n  },\n\n  /**\n   * 组题目删除\n   */\n  queDelete (e) {\n    let idx = parseInt(e.currentTarget.dataset.idx)\n    this.data.content.splice(idx, 1)\n    this.setData({\n      content: this.data.content\n    })\n  },\n\n  /**\n   * 单选多选题目添加选项\n   */\n  addOption (e) {\n    let idx = parseInt(e.currentTarget.dataset.idx)\n    this.data.content[idx].item.push({\n      itemIndex: String.fromCharCode(this.data.content[idx].item.length - 1),\n      itemContent: ''\n    })\n    this.setData({\n      content: this.data.content\n    })\n  },\n\n  /**\n   * 支持其它\n   */\n  supportOther (e) {\n    let idx = parseInt(e.currentTarget.dataset.idx)\n    this.data.content[idx].myChoice = true\n    this.setData({\n      otherIndex: String.fromCharCode(this.data.content[idx].item.length),\n      content: this.data.content\n    })\n  },\n\n  /**\n   * 支持其它\n   */\n  cancelOther (e) {\n    let idx = parseInt(e.currentTarget.dataset.idx)\n    this.data.content[idx].myChoice = false\n    this.setData({\n      content: this.data.content\n    })\n  }\n})\n"]}